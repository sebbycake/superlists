{% extends 'base.html' %}

{% load tz %}
{% load list_extras %}

{% block title %}
{{ list.name }}
{% endblock %}

{% block content %}

<div class="header animate__animated animate__slideInDown">
    <h1>{{ list.name }}</h1>
</div>

<!-- display error message -->
<div class="item-error-msg" role="alert">
</div>

<!-- display form -->
{% if non_user_exists or user_exists %}
<div class="input-form">
    <form method="post" id="item-create-form" data-id="{{ list.id }}">
        {{ form.text }}
        {% csrf_token %}
    </form>
</div>
{% endif %}

<!-- display all items from this list -->
<div class="item-list">

    {% for item in list.item_set.all %}
    <div class="item animate__animated animate__fadeIn">

        <!-- Converts URLs and email addresses in text (if any) into clickable links -->
        {{ item.text|urlize }}</br>

        <!-- display item timestamp -->
        {% timezone "Asia/Singapore" %}
        <span class="item-timestamp">
            <!-- {{ item.timestamp|time:"P" }} | {{ item.timestamp|date:"d M" }} -->
            {{ item.timestamp|timesince|upto:',' }} ago
        </span>
        {% endtimezone %}

        <!-- button to delete item -->
        {% if non_user_exists or user_exists %}
        <span class="delete-item-btn" data-id="{{ item.id }}">
            <i class="material-icons" style="color:#fff">delete_outline</i>
        </span>
        <span class="pin-item-btn" data-id="{{ item.id }}">
            <i class="material-icons" style="{% if item.is_pinned %}color:#ff1f5a{% else %}color:#fff{% endif %}">push_pin</i>
        </span>
        {% endif %}

    </div>
    {% endfor %}

</div>

<br />

{% endblock %}